<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>

<div id="container" style="min-width: 310px;max-width: auto;"></div>

<!-- <button id="large">Large</button> -->
<!-- <button id="small">Small</button> -->
<!-- <button id="auto">Auto</button> -->

<script>

//$.getJSON('https://www.highcharts.com/samples/data/jsonp.php?filename=goog-c.json&callback=?', function (data) {
$.getJSON('/json/{{rank}}', function (data) {
	
    // Create the chart
    var chart = Highcharts.stockChart('container', {

        chart: {
            height: 400
        },

        title: {
            text: 'Highstock Responsive Chart'
        },

        subtitle: {
            text: 'Click small/large buttons or change window size to test responsiveness'
        },

        rangeSelector: {
            selected: 1
        },

        series: [{
            name: 'AAPL Stock Price',
            data: data,
            type: 'area',
            threshold: null,
            tooltip: {
                valueDecimals: 2
            }
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    chart: {
                        height: 300
                    },
                    subtitle: {
                        text: null
                    },
                    navigator: {
                        enabled: false
                    }
                }
            }]
        }
    });


    //$('#small').click(function () {
     //   chart.setSize(400);
    //});

    //$('#large').click(function () {
     //   chart.setSize(800);
    //});

    //$('#auto').click(function () {
     //   chart.setSize(null);
    //});
});

</script>

<!-- <script> -->
<!-- /** -->
 <!-- * Request data from the server, add it to the graph and set a timeout  -->
 <!-- * to request again -->
 <!-- */ -->
<!-- function requestData() { -->
    <!-- $.ajax({ -->
        <!-- url: '/json/', -->
        <!-- success: function(point) { -->
            <!-- var series = chart.series[0], -->
                <!-- shift = series.data.length > 20; // shift if the series is  -->
                                                 <!-- // longer than 20 -->

            <!-- // add the point -->
            <!-- chart.series[0].addPoint(point, true, shift); -->
            
            <!-- // call it again after one second -->
            <!-- setTimeout(requestData, 1000);     -->
        <!-- }, -->
        <!-- cache: false -->
    <!-- }); -->
<!-- } -->

<!-- $(document).ready(function() { -->
    <!-- chart = new Highcharts.Chart({ -->
        <!-- chart: { -->
            <!-- renderTo: 'container', -->
            <!-- defaultSeriesType: 'spline', -->
            <!-- events: { -->
                <!-- load: requestData -->
            <!-- } -->
        <!-- }, -->
        <!-- title: { -->
            <!-- text: 'Live random data' -->
        <!-- }, -->
        <!-- xAxis: { -->
            <!-- type: 'datetime', -->
            <!-- tickPixelInterval: 150, -->
            <!-- maxZoom: 20 * 1000 -->
        <!-- }, -->
        <!-- yAxis: { -->
            <!-- minPadding: 0.2, -->
            <!-- maxPadding: 0.2, -->
            <!-- title: { -->
                <!-- text: 'Value', -->
                <!-- margin: 80 -->
            <!-- } -->
        <!-- }, -->
        <!-- series: [{ -->
            <!-- name: 'Random data', -->
            <!-- data: [] -->
        <!-- }] -->
    <!-- });         -->
<!-- }); -->
<!-- </script> -->


